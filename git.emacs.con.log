>$ pushd ~/text/merge-view
~/text/merge-view ~

>$ git init
Initialized empty Git repository in /root/text/merge-view/.git/

>$ ls -alF
total 32
drwxr-xr-x 3 root root 4096 Jun 29 19:05 ./
lrwxrwxrwx 1 root root   29 Jun 29 19:05 .#emacs.con.log -> root@andLinux.3096:1246005411
drwxr-xr-x 5 root root 4096 Jun 29 18:57 ../
drwxr-xr-x 7 root root 4096 Jun 29 19:04 .git/
lrwxrwxrwx 1 root root   98 Jun 29 19:05 SMSC_trace_3cc70325.resp -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/SMSC_trace_3cc70325.resp*
lrwxrwxrwx 1 root root   98 Jun 29 19:05 SMSC_trace_41df034a.resp -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/SMSC_trace_41df034a.resp*
-rw-r--r-- 1 root root  128 Jun 29 19:05 emacs.con.log
-rw-r--r-- 1 root root  154 Jun 29 18:58 emacs.con.log~
lrwxrwxrwx 1 root root  103 Jun 29 19:05 switch-of-indi.script.con.log -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/switch-of-indi.script.con.log*

>$ git add .
>$ export EDITOR=emacsclient
>$ git commit -a
Waiting for Emacs...
Created initial commit 0300d07: 1st commit
 6 files changed, 28 insertions(+), 0 deletions(-)
 create mode 120000 .#emacs.con.log
 create mode 120000 SMSC_trace_3cc70325.resp
 create mode 120000 SMSC_trace_41df034a.resp
 create mode 100644 emacs.con.log
 create mode 100644 emacs.con.log~
 create mode 120000 switch-of-indi.script.con.log

>$ git remote add origin git@github.com:pepe5/merge-view.git
>$ git push origin master
Counting objects: 8, done.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (8/8), 1.15 KiB, done.
Total 8 (delta 1), reused 0 (delta 0)
To git@github.com:pepe5/merge-view.git
 * [new branch]      master -> master

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 44587cd: data upload
 4 files changed, 5790 insertions(+), 3 deletions(-)
 rewrite SMSC_trace_3cc70325.resp (100%)
 mode change 120000 => 100755
 rewrite SMSC_trace_41df034a.resp (100%)
 mode change 120000 => 100755
 rewrite switch-of-indi.script.con.log (100%)
 mode change 120000 => 100755

>$ echo 1..>1; echo 2..>2
>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit ef575c4: 1st readall
 9 files changed, 125 insertions(+), 0 deletions(-)
 rename .#emacs.con.log => .#git.emacs.con.log (100%)
 create mode 100644 1
 create mode 100644 2
 copy emacs.con.log => git.emacs.con.log (81%)
 rename emacs.con.log => git.emacs.con.log~ (82%)
 create mode 100644 merge-view.rb
 create mode 100644 merge-view.rb~
 create mode 100644 tmp.emacs.con.log
 create mode 100644 tmp.emacs.con.log~

>$ git add .
>$ git diff HEAD..HEAD^1 | egrep '^\+' | egrep -v '^\+$' | head
+++ b/.#emacs.con.log
+root@andLinux.3096:1246005411
+++ /dev/null
+++ /dev/null
+++ /dev/null
+++ b/emacs.con.log
+>$ pushd ~/text/merge-view
+~/text/merge-view ~
+>$ git init
+Initialized empty Git repository in /root/text/merge-view/.git/

>$ git diff HEAD..HEAD^1 merge-view.rb | egrep '^\+' | egrep -v '^\+$' | head
+++ /dev/null

>$ git diff | egrep '^\+' | egrep -v '^\+$' | head
+++ b/git.emacs.con.log
+>$ git add .
+>$ git commit -a
+Waiting for Emacs...
+Created commit ef575c4: 1st readall
+ 9 files changed, 125 insertions(+), 0 deletions(-)
+ rename .#emacs.con.log => .#git.emacs.con.log (100%)
+ create mode 100644 1
+ create mode 100644 2
+ copy emacs.con.log => git.emacs.con.log (81%)

>$ git commit -a
Waiting for Emacs...
Created commit 757cdb1: readall collecting
 4 files changed, 46 insertions(+), 87 deletions(-)
 delete mode 100644 tmp.emacs.con.log
 delete mode 100644 tmp.emacs.con.log~

>$ echo 1:aaa..>1; echo 2:bbb..>2; echo 3:ccc..>>1
>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit f8faabc: readline reads
 4 files changed, 26 insertions(+), 10 deletions(-)
 rewrite merge-view.rb (60%)

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit aac58fd: min_by intro
 2 files changed, 15 insertions(+), 3 deletions(-)

>$ ruby merge-view.rb 1 2
{"1"=>"1:aaa..\n"}
"1": "1:aaa..\n"
"2": "2:bbb..\n"
1:aaa..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit b383251: readline +/-
 2 files changed, 27 insertions(+), 4 deletions(-)
 create mode 100644 v}

>$ ruby merge-view.rb 1 2
1:aaa..
cache: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
1:aaa..
cache: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 34d62e7: fillup start
 3 files changed, 153 insertions(+), 6 deletions(-)
 create mode 100644 #git.emacs.con.log#

>$ ruby merge-view.rb 1 2
@cache before min: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
poped: "1:aaa..\n"
@cache after pop: {"1"=>[], "2"=>["2:bbb..\n"]}}
>| fillup |: {"1"=>[], "2"=>["2:bbb..\n"]}
+| {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
@cache after fillup: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
1:aaa..

@cache before min: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
poped: "2:bbb..\n"
@cache after pop: {"1"=>["3:ccc..\n"], "2"=>[]}}
>| fillup |: {"1"=>["3:ccc..\n"], "2"=>[]}
merge-view.rb:16:in `readline': end of file reached (EOFError)
        from merge-view.rb:16:in `fillupFrom'
        from merge-view.rb:15:in `each'
        from merge-view.rb:15:in `fillupFrom'
        from merge-view.rb:36:in `readline'
        from merge-view.rb:44

>$ 