>$ pushd ~/text/merge-view
~/text/merge-view ~

>$ git init
Initialized empty Git repository in /root/text/merge-view/.git/

>$ ls -alF
total 32
drwxr-xr-x 3 root root 4096 Jun 29 19:05 ./
lrwxrwxrwx 1 root root   29 Jun 29 19:05 .#emacs.con.log -> root@andLinux.3096:1246005411
drwxr-xr-x 5 root root 4096 Jun 29 18:57 ../
drwxr-xr-x 7 root root 4096 Jun 29 19:04 .git/
lrwxrwxrwx 1 root root   98 Jun 29 19:05 SMSC_trace_3cc70325.resp -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/SMSC_trace_3cc70325.resp*
lrwxrwxrwx 1 root root   98 Jun 29 19:05 SMSC_trace_41df034a.resp -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/SMSC_trace_41df034a.resp*
-rw-r--r-- 1 root root  128 Jun 29 19:05 emacs.con.log
-rw-r--r-- 1 root root  154 Jun 29 18:58 emacs.con.log~
lrwxrwxrwx 1 root root  103 Jun 29 19:05 switch-of-indi.script.con.log -> /mnt/win/pepa/dox(!)/tasks/small-projects/cr15282 20-digits/.bak/rbdl-stu/switch-of-indi.script.con.log*

>$ git add .
>$ export EDITOR=emacsclient
>$ git commit -a
Waiting for Emacs...
Created initial commit 0300d07: 1st commit
 6 files changed, 28 insertions(+), 0 deletions(-)
 create mode 120000 .#emacs.con.log
 create mode 120000 SMSC_trace_3cc70325.resp
 create mode 120000 SMSC_trace_41df034a.resp
 create mode 100644 emacs.con.log
 create mode 100644 emacs.con.log~
 create mode 120000 switch-of-indi.script.con.log

>$ git remote add origin git@github.com:pepe5/merge-view.git
>$ git push origin master
Counting objects: 8, done.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (8/8), 1.15 KiB, done.
Total 8 (delta 1), reused 0 (delta 0)
To git@github.com:pepe5/merge-view.git
 * [new branch]      master -> master

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 44587cd: data upload
 4 files changed, 5790 insertions(+), 3 deletions(-)
 rewrite SMSC_trace_3cc70325.resp (100%)
 mode change 120000 => 100755
 rewrite SMSC_trace_41df034a.resp (100%)
 mode change 120000 => 100755
 rewrite switch-of-indi.script.con.log (100%)
 mode change 120000 => 100755

>$ echo 1..>1; echo 2..>2
>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit ef575c4: 1st readall
 9 files changed, 125 insertions(+), 0 deletions(-)
 rename .#emacs.con.log => .#git.emacs.con.log (100%)
 create mode 100644 1
 create mode 100644 2
 copy emacs.con.log => git.emacs.con.log (81%)
 rename emacs.con.log => git.emacs.con.log~ (82%)
 create mode 100644 merge-view.rb
 create mode 100644 merge-view.rb~
 create mode 100644 tmp.emacs.con.log
 create mode 100644 tmp.emacs.con.log~

>$ git add .
>$ git diff HEAD..HEAD^1 | egrep '^\+' | egrep -v '^\+$' | head
+++ b/.#emacs.con.log
+root@andLinux.3096:1246005411
+++ /dev/null
+++ /dev/null
+++ /dev/null
+++ b/emacs.con.log
+>$ pushd ~/text/merge-view
+~/text/merge-view ~
+>$ git init
+Initialized empty Git repository in /root/text/merge-view/.git/

>$ git diff HEAD..HEAD^1 merge-view.rb | egrep '^\+' | egrep -v '^\+$' | head
+++ /dev/null

>$ git diff | egrep '^\+' | egrep -v '^\+$' | head
+++ b/git.emacs.con.log
+>$ git add .
+>$ git commit -a
+Waiting for Emacs...
+Created commit ef575c4: 1st readall
+ 9 files changed, 125 insertions(+), 0 deletions(-)
+ rename .#emacs.con.log => .#git.emacs.con.log (100%)
+ create mode 100644 1
+ create mode 100644 2
+ copy emacs.con.log => git.emacs.con.log (81%)

>$ git commit -a
Waiting for Emacs...
Created commit 757cdb1: readall collecting
 4 files changed, 46 insertions(+), 87 deletions(-)
 delete mode 100644 tmp.emacs.con.log
 delete mode 100644 tmp.emacs.con.log~

>$ echo 1:aaa..>1; echo 2:bbb..>2; echo 3:ccc..>>1
>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit f8faabc: readline reads
 4 files changed, 26 insertions(+), 10 deletions(-)
 rewrite merge-view.rb (60%)

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit aac58fd: min_by intro
 2 files changed, 15 insertions(+), 3 deletions(-)

>$ ruby merge-view.rb 1 2
{"1"=>"1:aaa..\n"}
"1": "1:aaa..\n"
"2": "2:bbb..\n"
1:aaa..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit b383251: readline +/-
 2 files changed, 27 insertions(+), 4 deletions(-)
 create mode 100644 v}

>$ ruby merge-view.rb 1 2
1:aaa..
cache: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
1:aaa..
cache: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 34d62e7: fillup start
 3 files changed, 153 insertions(+), 6 deletions(-)
 create mode 100644 #git.emacs.con.log#

>$ ruby merge-view.rb 1 2
@cache before min: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
poped: "1:aaa..\n"
@cache after pop: {"1"=>[], "2"=>["2:bbb..\n"]}}
>| fillup |: {"1"=>[], "2"=>["2:bbb..\n"]}
+| {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
@cache after fillup: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
1:aaa..

@cache before min: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
poped: "2:bbb..\n"
@cache after pop: {"1"=>["3:ccc..\n"], "2"=>[]}}
>| fillup |: {"1"=>["3:ccc..\n"], "2"=>[]}
merge-view.rb:16:in `readline': end of file reached (EOFError)
        from merge-view.rb:16:in `fillupFrom'
        from merge-view.rb:15:in `each'
        from merge-view.rb:15:in `fillupFrom'
        from merge-view.rb:36:in `readline'
        from merge-view.rb:44

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 15ec164: fillup dbg incr
 3 files changed, 48 insertions(+), 137 deletions(-)
 delete mode 100644 #git.emacs.con.log#

>$ ruby merge-view.rb 1 2
@cache before min: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["1:aaa..\n"], "2"=>["2:bbb..\n"]}
poped: "1:aaa..\n"
@cache after pop: {"1"=>[], "2"=>["2:bbb..\n"]}}
>| fillup |: {"1"=>[], "2"=>["2:bbb..\n"]}
+| {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
@cache after fillup: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
1:aaa..

@cache before min: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
>| min |: {"1"=>["3:ccc..\n"], "2"=>["2:bbb..\n"]}
poped: "2:bbb..\n"
@cache after pop: {"1"=>["3:ccc..\n"], "2"=>[]}}
>| fillup |: {"1"=>["3:ccc..\n"], "2"=>[]}
+| {"1"=>["3:ccc..\n"]}
@cache after fillup: {"1"=>["3:ccc..\n"]}
2:bbb..

@cache before min: {"1"=>["3:ccc..\n"]}
>| min |: {"1"=>["3:ccc..\n"]}
poped: "3:ccc..\n"
@cache after pop: {"1"=>[]}}
>| fillup |: {"1"=>[]}
+| {}
@cache after fillup: {}
3:ccc..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit e90765b: fillup +/-
 2 files changed, 43 insertions(+), 4 deletions(-)

>$ ruby merge-view.rb 1 2
>|@ k,v: ["1", ["1:aaa..\n"]]
maybe: 1
orig: 1
>|@ k,v: ["2", ["2:bbb..\n"]]
maybe: 2
orig: 1
minCons: {"1"=>"1:aaa..\n"}
1:aaa..
>|@ k,v: ["1", ["3:ccc..\n"]]
maybe: 3
orig: 3
>|@ k,v: ["2", ["2:bbb..\n"]]
maybe: 2
orig: 3
minCons: {"2"=>["2:bbb..\n"]}
file 2 closed.#<IO:0xb7ce455c>
2:bbb..
>|@ k,v: ["1", ["3:ccc..\n"]]
maybe: 3
orig: 3
minCons: {"1"=>"3:ccc..\n"}
file 1 closed.#<IO:0xb7ce455c>
3:ccc..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit ecdc53b: cleanup +/-; dbg state
 3 files changed, 290 insertions(+), 28 deletions(-)
 create mode 100644 #git.emacs.con.log#

>$ ruby merge-view.rb 1 2
1:aaa..
file 2 closed.#<IO:0xb7cba554>
2:bbb..
file 1 closed.#<IO:0xb7cba554>
3:ccc..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 95cd937: v1
 3 files changed, 9 insertions(+), 236 deletions(-)
 delete mode 100644 #git.emacs.con.log#

>$ git tag v1 95cd937
>$ git push origin master
Counting objects: 62, done.
Compressing objects: 100% (51/51), done.
Writing objects: 100% (57/57), 293.29 KiB | 85 KiB/s, done.
Total 57 (delta 31), reused 0 (delta 0)
Writing objects:  43% (25/57), 56.00 KiB | 85 KiB/s   Writing objects:  42% (24/57)   Writing objects:  28% (16/57)   Compressing objects:  29% (15/51)   Compressing objects:   7% (4/51)   
To git@github.com:pepe5/merge-view.git
   0300d07..95cd937  master -> master

>$ echo 11:22:11--aaa..>1; echo 22:22:22::bbb..>2; echo 22:33:33**ccc..>>1
>$ ruby merge-view.rb 1 2
11:22:11--aaa..
file 1 closed.#<IO:0xb7ccf558>
22:33:33**ccc..
file 2 closed.#<IO:0xb7ccf558>
22:22:22::bbb..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit 76202f6: (min's) block start
 4 files changed, 39 insertions(+), 6 deletions(-)

>$ ruby merge-view.rb 1 2
11:22:11--aaa..
file 1 closed.#<IO:0xb7c9e55c>
22:33:33**ccc..
file 2 closed.#<IO:0xb7c9e55c>
22:22:22::bbb..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit ca81103: block parametrized
 3 files changed, 288 insertions(+), 5 deletions(-)
 create mode 100644 #git.emacs.con.log#

>$ git add .
>$ git commit -a
Waiting for Emacs...

>$ git commit -a
Waiting for Emacs...
Created commit 4de707d: block moved up..
 3 files changed, 20 insertions(+), 278 deletions(-)
 delete mode 100644 #git.emacs.con.log#

>$ git push origin master
Counting objects: 20, done.
Compressing objects: 100% (13/13), done.
Writing objects: 100% (15/15), 1.80 KiB, done.
Total 15 (delta 10), reused 0 (delta 0)
To git@github.com:pepe5/merge-view.git
   95cd937..4de707d  master -> master

>$ echo 11:22:11|aaa..>1; echo 22:22:22|bbb..>2; echo 22:33:33|ccc..>>1
bash: aaa..: command not found
bash: echo: write error: Broken pipe
bash: bbb..: command not found
bash: echo: write error: Broken pipe
bash: ccc..: command not found
bash: echo: write error: Broken pipe

>$ echo '11:22:11|aaa..'>1; echo '22:22:22|bbb..'>2; echo '22:33:33|ccc..'>>1
>$ ruby merge-view.rb 1 2
11:22:11|aaa..
file 1 closed.#<IO:0xb7c51554>
22:33:33|ccc..
file 2 closed.#<IO:0xb7c51554>
22:22:22|bbb..

>$ git diff | egrep '^\+' | egrep -v '^\+$' | head
+++ b/1
+11:22:11|aaa..
+22:33:33|ccc..
+++ b/2
+22:22:22|bbb..
+++ b/git.emacs.con.log
+>$ git commit -a
+Waiting for Emacs...
+Created commit 4de707d: block moved up..
+ 3 files changed, 20 insertions(+), 278 deletions(-)

>$ git diff HEAD..HEAD^1 merge-view.rb | egrep '^\+' | egrep -v '^\+$' | head
+++ b/merge-view.rb
+      b = (b) ? b : @@b

>$ git add .
>$ git diff HEAD..HEAD^1 merge-view.rb | egrep '^\+' | egrep -v '^\+$' | head
+++ b/merge-view.rb
+      b = (b) ? b : @@b

>$ git commit -a
Waiting for Emacs...
Created commit a5b136a: block -> optional
 4 files changed, 65 insertions(+), 8 deletions(-)

>$ git add .
>$ ruby merge-view.rb 1 2
merge-view.rb:47: warning: don't put space before argument parentheses
11:22:11|aaa..
file 1 closed.#<IO:0xb7c3c550>
22:33:33|ccc..
file 2 closed.#<IO:0xb7c3c550>
22:22:22|bbb..

>$ git add .
>$ git commit -a
Waiting for Emacs...
Created commit ccd01a7: time cmp start
 2 files changed, 17 insertions(+), 4 deletions(-)

>$ git push origin master
Counting objects: 15, done.
Compressing objects: 100% (8/8), done.
Writing objects: 100% (10/10), 1.55 KiB, done.
Total 10 (delta 6), reused 0 (delta 0)
To git@github.com:pepe5/merge-view.git
   4de707d..ccd01a7  master -> master

>$ git pull origin master
remote: Counting objects: 18, done.
remote: Compressing objects: 100% (16/16), done.
remote: Total 16 (delta 10), reused 0 (delta 0)
Unpacking objects: 100% (16/16), done.
From git@github.com:pepe5/merge-view
 * branch            master     -> FETCH_HEAD
Updating ccd01a7..47dee54
git.emacs.con.log: needs update
merge-view.rb: needs update
v}: needs update
error: Entry 'merge-view.rb' not uptodate. Cannot merge.

>$ mkdir ../$(basename `pwd`)~
>$ pushd ../$(basename `pwd`)~
~/text/merge-view~ ~/text/merge-view ~

>$ git init 
Initialized empty Git repository in /root/text/merge-view~/.git/

>$ git remote add origin git@github.com:pepe5/merge-view.git
>$ git pull origin master
warning: no common commits
remote: Counting objects: 106, done.
remote: Compressing objects: 100% (95/95), done.
remote: Total 106 (delta 61), reused 0 (delta 0)
Receiving objects: 100% (106/106), 368.47 KiB | 176 KiB/s, done.
Resolving deltas: 100% (61/61), done.
remote: Compressing objects:  77% (74/95)   
remote: Compressing objects:   3% (3/95)   
remote: Compressing objects:   1% (1/95)   
remote: Counting objects: 19   
From git@github.com:pepe5/merge-view
 * branch            master     -> FETCH_HEAD

>$ diff -qr ./ ../merge-view
diff: ./.#git.emacs.con.log: No such file or directory
diff: ../merge-view/.#git.emacs.con.log: No such file or directory
Only in ../merge-view/.git: COMMIT_EDITMSG

>$ diff -qr ./ ../merge-view | grep -v /.git/
diff: ./.#git.emacs.con.log: No such file or directory
diff: ../merge-view/.#git.emacs.con.log: No such file or directory
Only in ../merge-view/.git: COMMIT_EDITMSG
Only in ../merge-view/.git: COMMIT_EDITMSG~
Only in ../merge-view/.git: ORIG_HEAD
Files ./git.emacs.con.log and ../merge-view/git.emacs.con.log differ
Files ./merge-view.rb and ../merge-view/merge-view.rb differ
Only in ./: typescript

>$ rm -rf ../merge-view/
>$ mv ../merge-view~/ ../merge-view/
>$ 